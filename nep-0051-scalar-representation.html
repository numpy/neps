
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>NEP 51 — Changing the representation of NumPy scalars &#8212; NumPy Enhancement Proposals</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=7f41d439"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'nep-0051-scalar-representation';</script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Open NEPs (under consideration)" href="open.html" />
    <link rel="prev" title="NEP 44 — Restructuring the NumPy documentation" href="nep-0044-restructuring-numpy-docs.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
    <meta name="docbuild:last-update" content="Jan 16, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="content.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/numpylogo.svg" class="logo__image only-light" alt="NumPy Enhancement Proposals - Home"/>
    <img src="_static/numpylogo.svg" class="logo__image only-dark pst-js-only" alt="NumPy Enhancement Proposals - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Index
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="scope.html">
    The Scope of NumPy
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="roadmap.html">
    Current roadmap
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/numpy/numpy/issues?q=is%3Aopen+is%3Aissue+label%3A%2223+-+Wish+List%22">
    Wish list
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/numpy/numpy/issues?q=is%3Aopen+is%3Aissue+label%3A%2223+-+Wish+List%22">
    Wishlist
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/numpy/numpy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Index
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="scope.html">
    The Scope of NumPy
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="roadmap.html">
    Current roadmap
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/numpy/numpy/issues?q=is%3Aopen+is%3Aissue+label%3A%2223+-+Wish+List%22">
    Wish list
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/numpy/numpy/issues?q=is%3Aopen+is%3Aissue+label%3A%2223+-+Wish+List%22">
    Wishlist
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/numpy/numpy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="scope.html">The Scope of NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Current roadmap</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/numpy/numpy/issues?q=is%3Aopen+is%3Aissue+label%3A%2223+-+Wish+List%22">Wish list</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="meta.html">Meta-NEPs (NEPs about NEPs or active Processes)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="nep-0000.html">NEP 0 — Purpose and process</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0023-backwards-compatibility.html">NEP 23 — Backwards compatibility and deprecation policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0036-fair-play.html">NEP 36 — Fair play</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0045-c_style_guide.html">NEP 45 — C style guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0046-sponsorship-guidelines.html">NEP 46 — NumPy sponsorship guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0048-spending-project-funds.html">NEP 48 — Spending NumPy project funds</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-template.html">NEP X — Template and instructions</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="provisional.html">Provisional NEPs (provisionally accepted; interface may change)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="accepted.html">Accepted NEPs (implementation in progress)</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="nep-0041-improved-dtype-support.html">NEP 41 — First step towards a new datatype system</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0042-new-dtypes.html">NEP 42 — New and extensible DTypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0044-restructuring-numpy-docs.html">NEP 44 — Restructuring the NumPy documentation</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">NEP 51 — Changing the representation of NumPy scalars</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="open.html">Open NEPs (under consideration)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="nep-0043-extensible-ufuncs.html">NEP 43 — Enhancing the extensibility of UFuncs</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0053-c-abi-evolution.html">NEP 53 — Evolving the NumPy C-API for NumPy 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0054-simd-cpp-highway.html">NEP 54 — SIMD infrastructure evolution: adopting Google Highway when moving to C++?</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="finished.html">Finished NEPs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="nep-0001-npy-format.html">NEP 1 — A simple file format for NumPy arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0005-generalized-ufuncs.html">NEP 5 — Generalized universal functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0007-datetime-proposal.html">NEP 7 — A proposal for implementing some date/time types in NumPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0010-new-iterator-ufunc.html">NEP 10 — Optimizing iterator/UFunc performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0013-ufunc-overrides.html">NEP 13 — A mechanism for overriding Ufuncs</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0014-dropping-python2.7-proposal.html">NEP 14 — Plan for dropping Python 2.7 support</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0015-merge-multiarray-umath.html">NEP 15 — Merging multiarray and umath</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0018-array-function-protocol.html">NEP 18 — A dispatch mechanism for NumPy's high level array functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0019-rng-policy.html">NEP 19 — Random number generator policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0020-gufunc-signature-enhancement.html">NEP 20 — Expansion of generalized universal function signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0022-ndarray-duck-typing-overview.html">NEP 22 — Duck typing for NumPy arrays – high level overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0027-zero-rank-arrarys.html">NEP 27 — Zero rank arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0028-website-redesign.html">NEP 28 — numpy.org website redesign</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0029-deprecation_policy.html">NEP 29 — Recommend Python and NumPy version support as a community policy standard</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0032-remove-financial-functions.html">NEP 32 — Remove the financial functions from NumPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0034-infer-dtype-is-object.html">NEP 34 — Disallow inferring ``dtype=object`` from sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0035-array-creation-dispatch-with-array-function.html">NEP 35 — Array creation dispatching with __array_function__</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0038-SIMD-optimizations.html">NEP 38 — Using SIMD optimization instructions for performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0040-legacy-datatype-impl.html">NEP 40 — Legacy datatype implementation in NumPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0049.html">NEP 49 — Data allocation strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0050-scalar-promotion.html">NEP 50 — Promotion rules for Python scalars</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0052-python-api-cleanup.html">NEP 52 — Python API cleanup for NumPy 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0055-string_dtype.html">NEP 55 — Add a UTF-8 variable-width string DType to NumPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0056-array-api-main-namespace.html">NEP 56 — Array API standard support in NumPy's main namespace</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="deferred.html">Deferred and Superseded NEPs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="nep-0002-warnfix.html">NEP 2 — A proposal to build numpy without warning with a big set of warning flags</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0003-math_config_clean.html">NEP 3 — Cleaning the math configuration of numpy.core</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0004-datetime-proposal3.html">NEP 4 — A (third) proposal for implementing some date/time types in NumPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0006-newbugtracker.html">NEP 6 — Replacing Trac with a different bug tracker</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0008-groupby_additions.html">NEP 8 — A proposal for adding groupby functionality to NumPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0009-structured_array_extensions.html">NEP 9 — Structured array extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0011-deferred-ufunc-evaluation.html">NEP 11 — Deferred UFunc evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0012-missing-data.html">NEP 12 — Missing data functionality in NumPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0021-advanced-indexing.html">NEP 21 — Simplified and explicit advanced indexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0024-missing-data-2.html">NEP 24 — Missing data functionality - alternative 1 to NEP 12</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0025-missing-data-3.html">NEP 25 — NA support via special dtypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0026-missing-data-summary.html">NEP 26 — Summary of missing data NEPs and discussion</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0030-duck-array-protocol.html">NEP 30 — Duck typing for NumPy arrays - implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0031-uarray.html">NEP 31 — Context-local and global overrides of the NumPy API</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0037-array-module.html">NEP 37 — A dispatch protocol for NumPy-like modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0047-array-api-standard.html">NEP 47 — Adopting the array API standard</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="rejected.html">Rejected and Withdrawn NEPs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="nep-0016-abstract-array.html">NEP 16 — An abstract base class for identifying "duck arrays"</a></li>
<li class="toctree-l2"><a class="reference internal" href="nep-0017-split-out-maskedarray.html">NEP 17 — Split out masked arrays</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="content.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Roadmap &amp; NumPy enhancement proposals</a></li>
    
    
    <li class="breadcrumb-item"><a href="accepted.html" class="nav-link">Accepted NEPs (implementation in progress)</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">NEP 51 — Changing the representation of NumPy scalars</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="nep-51-changing-the-representation-of-numpy-scalars">
<span id="nep51"></span><h1>NEP 51 — Changing the representation of NumPy scalars<a class="headerlink" href="#nep-51-changing-the-representation-of-numpy-scalars" title="Link to this heading">#</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sebastian Berg</p>
</dd>
<dt class="field-even">Status<span class="colon">:</span></dt>
<dd class="field-even"><p>Accepted</p>
</dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Standards Track</p>
</dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even"><p>2022-09-13</p>
</dd>
<dt class="field-odd">Resolution<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://mail.python.org/archives/list/numpy-discussion&#64;python.org/message/U2A4RCJSXMK7GG23MA5QMRG4KQYFMO2S/">https://mail.python.org/archives/list/numpy-discussion&#64;python.org/message/U2A4RCJSXMK7GG23MA5QMRG4KQYFMO2S/</a></p>
</dd>
</dl>
<section id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Link to this heading">#</a></h2>
<p>NumPy has scalar objects (“NumPy scalar”) representing a single value
corresponding to a NumPy DType.  The representation of these currently
matches that of the Python builtins, giving:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span>
<span class="go">3.0</span>
</pre></div>
</div>
<p>In this NEP we propose to change the representation to include the
NumPy scalar type information.  Changing the above example to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span>
<span class="go">np.float32(3.0)</span>
</pre></div>
</div>
<p>We expect that this change will help users distinguish the NumPy scalars
from the Python builtin types and clarify their behavior.</p>
<p>The distinction between NumPy scalars and Python builtins will further become
more important for users once <a class="reference internal" href="nep-0050-scalar-promotion.html#nep50"><span class="std std-ref">NEP 50</span></a> is adopted.</p>
<p>These changes do lead to smaller incompatible and infrastructure changes
related to array printing.</p>
</section>
<section id="motivation-and-scope">
<h2>Motivation and scope<a class="headerlink" href="#motivation-and-scope" title="Link to this heading">#</a></h2>
<p>This NEP proposes to change the representation of the following
NumPy scalars types to distinguish them from the Python scalars:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">np.bool_</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.uint8</span></code>, <code class="docutils literal notranslate"><span class="pre">np.int8</span></code>, and all other integer scalars</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.float16</span></code>, <code class="docutils literal notranslate"><span class="pre">np.float32</span></code>, <code class="docutils literal notranslate"><span class="pre">np.float64</span></code>, <code class="docutils literal notranslate"><span class="pre">np.longdouble</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.complex64</span></code>, <code class="docutils literal notranslate"><span class="pre">np.complex128</span></code>, <code class="docutils literal notranslate"><span class="pre">np.clongdouble</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.str_</span></code>, <code class="docutils literal notranslate"><span class="pre">np.bytes_</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.void</span></code>  (structured dtypes)</p></li>
</ul>
<p>Additionally, the representation of the remaining NumPy scalars will be
adapted to print as <code class="docutils literal notranslate"><span class="pre">np.</span></code> rather than <code class="docutils literal notranslate"><span class="pre">numpy.</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code> and <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.void</span></code>  (unstructured version)</p></li>
</ul>
<p>The NEP does not propose to change how these scalars print – only
their representation (<code class="docutils literal notranslate"><span class="pre">__repr__</span></code>) will be changed.
Further, array representation will not be affected since it already
includes the <code class="docutils literal notranslate"><span class="pre">dtype=</span></code> when necessary.</p>
<p>The main motivation behind the change is that the Python numerical types
behave differently from the NumPy scalars.
For example numbers with lower precision (e.g. <code class="docutils literal notranslate"><span class="pre">uint8</span></code> or <code class="docutils literal notranslate"><span class="pre">float16</span></code>)
should be used with care and users should be aware when they are working
with them.  All NumPy integers can experience overflow which Python integers
do not.
These differences will be exacerbated when adopting <a class="reference internal" href="nep-0050-scalar-promotion.html#nep50"><span class="std std-ref">NEP 50</span></a>
because the lower precision NumPy scalar will be preserved more often.
Even <code class="docutils literal notranslate"><span class="pre">np.float64</span></code>, which is very similar to Python’s <code class="docutils literal notranslate"><span class="pre">float</span></code> and inherits
from it, does behave differently for example when dividing by zero.</p>
<p>Another common source of confusion are the NumPy booleans.  Python programmers
sometimes write <code class="docutils literal notranslate"><span class="pre">obj</span> <span class="pre">is</span> <span class="pre">True</span></code> and will surprised when an object that shows
as <code class="docutils literal notranslate"><span class="pre">True</span></code> fails to pass the test.
It is much easier to understand this behavior when the value is
shown as <code class="docutils literal notranslate"><span class="pre">np.True_</span></code>.</p>
<p>Not only do we expect the change to help users better understand and be
reminded of the differences between NumPy and Python scalars, but we also
believe that the awareness will greatly help debugging.</p>
</section>
<section id="usage-and-impact">
<h2>Usage and impact<a class="headerlink" href="#usage-and-impact" title="Link to this heading">#</a></h2>
<p>Most user code should not be impacted by the change, but users will now
often see NumPy values shown as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">True_</span>
<span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">(</span><span class="mi">34</span><span class="p">)</span>
</pre></div>
</div>
<p>and so on.  This will also mean that documentation and output in
Jupyter notebook cells will often show the type information intact.</p>
<p><code class="docutils literal notranslate"><span class="pre">np.longdouble</span></code> and <code class="docutils literal notranslate"><span class="pre">np.clongdouble</span></code> will print with single quotes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">longdouble</span><span class="p">(</span><span class="s1">&#39;3.0&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>to allow round-tripping.  Additionally to this change, <code class="docutils literal notranslate"><span class="pre">float128</span></code> will
now always be printed as <code class="docutils literal notranslate"><span class="pre">longdouble</span></code> since the old name gives a false
impression of precision.</p>
</section>
<section id="backward-compatibility">
<h2>Backward compatibility<a class="headerlink" href="#backward-compatibility" title="Link to this heading">#</a></h2>
<p>We expect that most workflows will not be affected as only printing
changes.  In general we believe that informing users about the type
they are working with outweighs the need for adapting printing in
some instances.</p>
<p>The NumPy test suite includes code such as <code class="docutils literal notranslate"><span class="pre">decimal.Decimal(repr(scalar))</span></code>.
This code needs to be modified to use the <code class="docutils literal notranslate"><span class="pre">str()</span></code>.</p>
<p>An exception to this are downstream libraries with documentation and
especially documentation testing.
Since the representation of many values will change, in many cases
the documentation will have to be updated.
This is expected to require larger documentation fixups in the mid-term.</p>
<p>It may be necessary to adopt tools for doctest testing to
allow approximate value checking for the new representation.</p>
<section id="changes-to-arr-tofile">
<h3>Changes to <code class="docutils literal notranslate"><span class="pre">arr.tofile()</span></code><a class="headerlink" href="#changes-to-arr-tofile" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">arr.tofile()</span></code> currently stores values as <code class="docutils literal notranslate"><span class="pre">repr(arr.item())</span></code> when in text
mode.  This is not always ideal since that may include a conversion to
Python.
One issue is that this would start saving longdouble as
<code class="docutils literal notranslate"><span class="pre">np.longdouble('3.1')</span></code> which is clearly not desired.  We expect that this
method is rarely used for object arrays.  For string arrays, using the <code class="docutils literal notranslate"><span class="pre">repr</span></code>
also leads to storing <code class="docutils literal notranslate"><span class="pre">&quot;string&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">b&quot;string&quot;</span></code> which seems rarely desired.</p>
<p>The proposal is to change the default (back) to use <code class="docutils literal notranslate"><span class="pre">str</span></code> rather than
<code class="docutils literal notranslate"><span class="pre">repr</span></code>.  If <code class="docutils literal notranslate"><span class="pre">repr</span></code> is desired, users will have to pass <code class="docutils literal notranslate"><span class="pre">fmt=%r</span></code>.</p>
</section>
</section>
<section id="detailed-description">
<h2>Detailed description<a class="headerlink" href="#detailed-description" title="Link to this heading">#</a></h2>
<p>This NEP proposes to change the representation for NumPy scalars to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">np.True_</span></code> and <code class="docutils literal notranslate"><span class="pre">np.False_</span></code> for booleans (their singleton instances)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.scalar(&lt;value&gt;)</span></code>, i.e. <code class="docutils literal notranslate"><span class="pre">np.float64(3.0)</span></code> for all numerical dtypes.</p></li>
<li><p>The value for <code class="docutils literal notranslate"><span class="pre">np.longdouble</span></code> and <code class="docutils literal notranslate"><span class="pre">np.clongdouble</span></code> will be given in quotes:
<code class="docutils literal notranslate"><span class="pre">np.longdouble('3.0')</span></code>.  This ensures that it can always roundtrip correctly
and matches the way that <code class="docutils literal notranslate"><span class="pre">decimal.Decimal</span></code> behaves.
For these two the size-based name such as <code class="docutils literal notranslate"><span class="pre">float128</span></code> will not be used
as the actual size is platform-dependent and therefore misleading.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.str_(&quot;string&quot;)</span></code> and <code class="docutils literal notranslate"><span class="pre">np.bytes_(b&quot;byte_string&quot;)</span></code> for string dtypes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">np.void((3,</span> <span class="pre">5),</span> <span class="pre">dtype=[('a',</span> <span class="pre">'&lt;i8'),</span> <span class="pre">('b',</span> <span class="pre">'u1')])</span></code> (similar to arrays)
for structured types. This will be valid syntax to recreate the scalar.</p></li>
</ul>
<p>Unlike arrays, the scalar representation should round-trip correctly, so
longdouble values will be quoted and other values never be truncated.</p>
<p>In some places (i.e. masked arrays, void and record scalars) we will want to
print the representation without the type.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">void</span><span class="p">((</span><span class="s1">&#39;3.0&#39;</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;f16&#39;</span><span class="p">)])</span>  <span class="c1"># longdouble</span>
</pre></div>
</div>
<p>should print the 3.0 with quotes (to ensure round-tripping), but not repeat
the full <code class="docutils literal notranslate"><span class="pre">np.longdouble('3.0')</span></code> as the dtype includes the longdouble
information.
To allow this, a new semi-public <code class="docutils literal notranslate"><span class="pre">np.core.array_print.get_formatter()</span></code> will
be introduced to expand the current functionality (see Implementation).</p>
<section id="effects-on-masked-arrays-and-records">
<h3>Effects on masked arrays and records<a class="headerlink" href="#effects-on-masked-arrays-and-records" title="Link to this heading">#</a></h3>
<p>Some other parts of NumPy will indirectly be changed.  Masked arrays
<code class="docutils literal notranslate"><span class="pre">fill_value</span></code> will be adapted to only include the full scalar information
such as <code class="docutils literal notranslate"><span class="pre">fill_value=np.float64(1e20)</span></code> when the dtype of the array
mismatches.
For longdouble (with matching dtype), it will be printed as
<code class="docutils literal notranslate"><span class="pre">fill_value='3.1'</span></code> including the quotes which (in principle but likely not
in practice) ensure round-tripping.
It should be noted that for strings it is typical for the dtypes to mismatch
in the string length.  So that strings will usually be printed as
<code class="docutils literal notranslate"><span class="pre">np.str_(&quot;N/A&quot;)</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">np.record</span></code> scalar will be aligned with <code class="docutils literal notranslate"><span class="pre">np.void</span></code> and print identically
to it (except the name itself).  For example as:
<code class="docutils literal notranslate"><span class="pre">np.record((3,</span> <span class="pre">5),</span> <span class="pre">dtype=[('a',</span> <span class="pre">'&lt;i8'),</span> <span class="pre">('b',</span> <span class="pre">'u1')])</span></code></p>
</section>
<section id="details-about-longdouble-and-clongdouble">
<h3>Details about <code class="docutils literal notranslate"><span class="pre">longdouble</span></code> and <code class="docutils literal notranslate"><span class="pre">clongdouble</span></code><a class="headerlink" href="#details-about-longdouble-and-clongdouble" title="Link to this heading">#</a></h3>
<p>For <code class="docutils literal notranslate"><span class="pre">longdouble</span></code> and <code class="docutils literal notranslate"><span class="pre">clongdouble</span></code> values such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">longdouble</span><span class="p">(</span><span class="mf">2.</span><span class="p">))</span>
</pre></div>
</div>
<p>may not roundtrip unless quoted as strings (as the conversion to a Python float
would lose precision).  This NEP proposes to use a single quote similar to
Python’s decimal which prints as <code class="docutils literal notranslate"><span class="pre">Decimal('3.0')</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">longdouble</span></code> can have different precision and storage sizes varying from
8 to 16 bytes.  However, even if <code class="docutils literal notranslate"><span class="pre">float128</span></code> is correct because the number
is stored as 128 bits, it normally does not have 128 bit precision.
(<code class="docutils literal notranslate"><span class="pre">clongdouble</span></code> is the same, but with twice the storage size.)</p>
<p>This NEP thus includes the proposal of changing the name of <code class="docutils literal notranslate"><span class="pre">longdouble</span></code>
to always print as <code class="docutils literal notranslate"><span class="pre">longdouble</span></code> and never <code class="docutils literal notranslate"><span class="pre">float128</span></code> or <code class="docutils literal notranslate"><span class="pre">float96</span></code>.
It does not include deprecating the <code class="docutils literal notranslate"><span class="pre">np.float128</span></code> alias.
However, such a deprecation may occur independently of the NEP.</p>
</section>
<section id="integer-scalar-type-name-and-instance-representation">
<h3>Integer scalar type name and instance representation<a class="headerlink" href="#integer-scalar-type-name-and-instance-representation" title="Link to this heading">#</a></h3>
<p>One detail is that due to NumPy scalar types being based on the C types,
NumPy sometimes distinguishes them, for example on most 64 bit systems
(not windows):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">longlong</span>
<span class="go">numpy.longlong</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">longlong</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">np.int64(3)</span>
</pre></div>
</div>
<p>The proposal will lead to the <code class="docutils literal notranslate"><span class="pre">longlong</span></code> name for the type while
using the <code class="docutils literal notranslate"><span class="pre">int64</span></code> form for the scalar.
This choice is made since <code class="docutils literal notranslate"><span class="pre">int64</span></code> is generally the more useful
information for users, but the type name itself must be precise.</p>
</section>
</section>
<section id="related-work">
<h2>Related work<a class="headerlink" href="#related-work" title="Link to this heading">#</a></h2>
<p>A PR to only change the representation of booleans was previously
made <a class="reference external" href="https://github.com/numpy/numpy/pull/17592">here</a>.</p>
<p>The implementation is (at the time of writing) largely finished and can be
found <a class="reference external" href="https://github.com/numpy/numpy/pull/22449">here</a></p>
</section>
<section id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Link to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This part has <em>not</em> been implemented in the
<a class="reference external" href="https://github.com/numpy/numpy/pull/22449">initial PR</a>.
A similar change will be required to fix certain cases in printing and
allow fully correct printing e.g. of structured scalars which include
longdoubles.
A similar solution is also expected to be necessary in the future
to allow custom DTypes to correctly print.</p>
</div>
<p>The new representations can be mostly implemented on the scalar types with
the largest changes needed in the test suite.</p>
<p>The proposed changes for void scalars and masked <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> makes it
necessary to expose the scalar representation without the type.</p>
<p>We propose introducing the semi-public API:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">arrayprint</span><span class="o">.</span><span class="n">get_formatter</span><span class="p">(</span><span class="o">*</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>to replace the current internal <code class="docutils literal notranslate"><span class="pre">_get_formatting_func</span></code>.  This will allow
two things compared to the old function:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code> may be <code class="docutils literal notranslate"><span class="pre">None</span></code> (if <code class="docutils literal notranslate"><span class="pre">dtype</span></code> is passed) allowing to not pass
multiple values that will be printed/formatted later.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fmt=</span></code> will allow passing on format strings to a DType-specific element
formatter in the future.  For now, <code class="docutils literal notranslate"><span class="pre">get_formatter()</span></code> will accept
<code class="docutils literal notranslate"><span class="pre">repr</span></code> or <code class="docutils literal notranslate"><span class="pre">str</span></code> (the singletons not strings) to format the elements
without type information (<code class="docutils literal notranslate"><span class="pre">'3.1'</span></code> rather than <code class="docutils literal notranslate"><span class="pre">np.longdouble('3.1')</span></code>).
The implementation ensures that formatting matches except for the type
information.</p>
<p>The empty format string will print identically to <code class="docutils literal notranslate"><span class="pre">str()</span></code> (with possibly
extra padding when data is passed).</p>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">get_formatter()</span></code> is expected to query a user DType’s method in the future
allowing customized formatting for all DTypes.</p>
<p>Making <code class="docutils literal notranslate"><span class="pre">get_formatter</span></code> public allows it to be used for <code class="docutils literal notranslate"><span class="pre">np.record</span></code> and
masked arrays.
Currently, the formatters themselves seem semi-public; using a single
entry-point will hopefully provide a clear API for formatting NumPy values.</p>
<p>The large part for the scalar representation changes had previously been done
by Ganesh Kathiresan in <a class="footnote-reference brackets" href="#id7" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>.</p>
</section>
<section id="alternatives">
<h2>Alternatives<a class="headerlink" href="#alternatives" title="Link to this heading">#</a></h2>
<p>Different representations can be considered: alternatives include spelling
<code class="docutils literal notranslate"><span class="pre">np.</span></code> as <code class="docutils literal notranslate"><span class="pre">numpy.</span></code> or dropping the <code class="docutils literal notranslate"><span class="pre">np.</span></code> part from the numerical scalars.
We believe that using <code class="docutils literal notranslate"><span class="pre">np.</span></code> is sufficiently clear, concise, and does allow
copy pasting the representation.
Using only <code class="docutils literal notranslate"><span class="pre">float64(3.0)</span></code> without the <code class="docutils literal notranslate"><span class="pre">np.</span></code> prefix is more concise but
contexts may exists where the NumPy dependency is not fully clear and the name
could clash with other libraries.</p>
<p>For booleans an alternative would be to use <code class="docutils literal notranslate"><span class="pre">np.bool_(True)</span></code> or <code class="docutils literal notranslate"><span class="pre">bool_(True)</span></code>.
However, NumPy boolean scalars are singletons and the proposed formatting is more
concise.  Alternatives for booleans were also discussed previously in <a class="footnote-reference brackets" href="#id6" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<p>For the string scalars, the confusion is generally less pronounced.  It may be
reasonable to defer changing these.</p>
<section id="non-finite-values">
<h3>Non-finite values<a class="headerlink" href="#non-finite-values" title="Link to this heading">#</a></h3>
<p>The proposal does not allow copy pasting <code class="docutils literal notranslate"><span class="pre">nan</span></code> and <code class="docutils literal notranslate"><span class="pre">inf</span></code> values.
They could be represented by <code class="docutils literal notranslate"><span class="pre">np.float64('nan')</span></code> or <code class="docutils literal notranslate"><span class="pre">np.float64(np.nan)</span></code>
instead.
This is more concise and Python also uses <code class="docutils literal notranslate"><span class="pre">nan</span></code> and <code class="docutils literal notranslate"><span class="pre">inf</span></code> rather than
allowing copy-pasting by showing it as <code class="docutils literal notranslate"><span class="pre">float('nan')</span></code>.  Arguably, it would be
a smaller addition in NumPy, where the will already be always printed.</p>
</section>
<section id="alternatives-for-the-new-get-formatter">
<h3>Alternatives for the new <code class="docutils literal notranslate"><span class="pre">get_formatter()</span></code><a class="headerlink" href="#alternatives-for-the-new-get-formatter" title="Link to this heading">#</a></h3>
<p>When <code class="docutils literal notranslate"><span class="pre">fmt=</span></code> is passed, and specifically for the main use (in this NEP) to
format to a <code class="docutils literal notranslate"><span class="pre">repr</span></code> or <code class="docutils literal notranslate"><span class="pre">str</span></code>.
It would also be possible to use a ufunc or a direct formatting function
rather than wrapping it into a <code class="docutils literal notranslate"><span class="pre">`get_formatter()</span></code> which relies on
instantiating a formatter class for the DType.</p>
<p>This NEP does not preclude creating a ufunc or making a special path.
However, NumPy array formatting commonly looks at all values to be formatted
in order to add padding for alignment or give uniform exponential output.
In this case <code class="docutils literal notranslate"><span class="pre">data=</span></code> is passed and used in preparation.  This form of
formatting (unlike the scalar case where <code class="docutils literal notranslate"><span class="pre">data=None</span></code> would be desired) is
unfortunately fundamentally incompatible with UFuncs.</p>
<p>The use of the singleton <code class="docutils literal notranslate"><span class="pre">str</span></code> and <code class="docutils literal notranslate"><span class="pre">repr</span></code> ensures that future formatting
strings like <code class="docutils literal notranslate"><span class="pre">f&quot;{arr:r}&quot;</span></code> are not in any way limited by using <code class="docutils literal notranslate"><span class="pre">&quot;r&quot;</span></code> or
<code class="docutils literal notranslate"><span class="pre">&quot;s&quot;</span></code> instead.</p>
</section>
</section>
<section id="discussion">
<h2>Discussion<a class="headerlink" href="#discussion" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>An discussion on this changed happened in the mailing list thread:
<a class="reference external" href="https://mail.python.org/archives/list/numpy-discussion&#64;python.org/thread/7GLGFHTZHJ6KQPOLMVY64OM6IC6KVMYI/">https://mail.python.org/archives/list/numpy-discussion&#64;python.org/thread/7GLGFHTZHJ6KQPOLMVY64OM6IC6KVMYI/</a></p></li>
<li><p>There was a previous issue <a class="footnote-reference brackets" href="#id6" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> and PR <a class="footnote-reference brackets" href="#id7" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> to change only the
representation of the NumPy booleans.  The PR was later updated to change
the representation of all (or at least most) NumPy scalars.</p></li>
</ul>
</section>
<section id="references-and-footnotes">
<h2>References and footnotes<a class="headerlink" href="#references-and-footnotes" title="Link to this heading">#</a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id6" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id3">1</a>,<a role="doc-backlink" href="#id4">2</a>)</span>
<p><a class="github reference external" href="https://github.com/numpy/numpy/issues/12950">numpy/numpy#12950</a></p>
</aside>
<aside class="footnote brackets" id="id7" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id2">1</a>,<a role="doc-backlink" href="#id5">2</a>)</span>
<p><a class="github reference external" href="https://github.com/numpy/numpy/pull/17592">numpy/numpy#17592</a></p>
</aside>
</aside>
</section>
<section id="copyright">
<h2>Copyright<a class="headerlink" href="#copyright" title="Link to this heading">#</a></h2>
<p>This document has been placed in the public domain.</p>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#abstract">Abstract</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#motivation-and-scope">Motivation and scope</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usage-and-impact">Usage and impact</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backward-compatibility">Backward compatibility</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-to-arr-tofile">Changes to <code class="docutils literal notranslate"><span class="pre">arr.tofile()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#detailed-description">Detailed description</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#effects-on-masked-arrays-and-records">Effects on masked arrays and records</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#details-about-longdouble-and-clongdouble">Details about <code class="docutils literal notranslate"><span class="pre">longdouble</span></code> and <code class="docutils literal notranslate"><span class="pre">clongdouble</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#integer-scalar-type-name-and-instance-representation">Integer scalar type name and instance representation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#related-work">Related work</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">Implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#alternatives">Alternatives</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#non-finite-values">Non-finite values</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alternatives-for-the-new-get-formatter">Alternatives for the new <code class="docutils literal notranslate"><span class="pre">get_formatter()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#discussion">Discussion</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references-and-footnotes">References and footnotes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#copyright">Copyright</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2017-2025, NumPy Developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>